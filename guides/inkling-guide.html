


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Learn the Inkling Language - Bonsai</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
	  <link href="../stylesheets/test.css" rel="stylesheet" media="screen" />
    <link href="../favicon.ico" rel="icon" type="image/ico" />
      <script src="../javascripts/all.js"></script>

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WVB6MG2');</script>
<!-- End Google Tag Manager -->
      <!-- start Mixpanel -->
<script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("91fbf7b68fb2356f91916026f221ddd5", {
    loaded: function(mixpanel) {
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        distinct_id = getParameterByName('refUserId');
        if (distinct_id) {
          mixpanel.identify(distinct_id);
        }
    }
});</script>
<!-- end Mixpanel -->

  </head>

  <body class="guides guides_inkling-guide" data-languages="[]">


	  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVB6MG2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --> 

  <div id="flex-container">

	<nav id="primary-nav">



	<div id="logo"> <a href="../"><img class="bonsai-logo" src="../images/bonsai-logo.svg"></a></div>

	<label for="drop" class="toggle"><img class="menu-ham" src="../images/menu.svg"></label>
	<input type="checkbox" id="drop" />

	<ul class="menu">

		<li class="header_menu_item "> <a href="getting-started.html">Quick Start</a></li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-1" class="toggle">Tutorials +</label><a  href="#">Tutorials</a>
			<input type="checkbox" id="drop-1"/>
			<ul id="tutorials">
				<li class=""> <a href="cli-install-guide.html">Install the CLI</a>  </li>
				<li class=""> <a href="sdk-install-guide.html">Install the SDK</a>  </li>
				<li class=""> <a href="local-dev-guide.html">Run the Platform Locally</a>  </li>
				<li class=""> <a href="jupyter-api-guide.html">Use Bonsai's API with Jupyter</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-2" class="toggle">Guides +</label><a  href="#">Guides</a>
			<input type="checkbox" id="drop-2"/>
			<ul id="guides">
				<li class=""> <a href="simulation-guide.html">Learn About Simulation Requirements</a>  </li>
				<li class="selected"> <a href="inkling-guide.html">Learn the Inkling Language</a>  </li>
				<li class=""> <a href="ai-engine-guide.html">Understand AI Engine Components</a>  </li>
				<li class=""> <a href="web-graphs-guide.html">Understand BRAIN Graphs</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-3" class="toggle">References +</label><a  href="#">References</a>
			<input type="checkbox" id="drop-3"/>
			<ul id="references">
				<li class=""> <a href="../references/api-reference.html">API Reference</a>  </li>
				<li class=""> <a href="../references/cli-reference.html">CLI Reference</a>  </li>
				<li class=""> <a href="../references/inkling-reference.html">Inkling Reference</a>  </li>
				<li class=""> <a href="../references/library-reference.html">Library Reference</a>  </li>
				<li class=""> <a href="../references/simulator-reference.html">Simulator Reference</a>
			</ul> 
		</li>

		<li class="header_menu_item "> <a href="../examples.html">Examples</a></li>

		<li>
			<input type="search" id="docs-search" placeholder="Search Bonsai Docs">
		</li>


	</ul>

</nav>


	<div id="main-wrapper">

    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">

        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div class="page-title">Learn the Inkling Language</div>
      <div id="toc">
      </div>

			 
<ul class="toc-footer">

<li><a href='https://bons.ai'>Bonsai Home</a></li>
<li><a href='https://beta.bons.ai'>BRAIN Dashboard</a></li>
<li><a href='https://github.com/BonsaiAI/slate'>Contribute to the Docs</a></li>
<li><a href='http://pages.bons.ai/apply.html'>Apply for Bonsai Platform Preview</a></li>
<li><a href="/releases.html">Product Release Notes</a></li>
<li><a href='https://bons.ai/contact-us#contact-page-form'>Contact Us</a></li>

</ul>


	   <div class="cc-bottom">
	
	<div class="toc-footer bottom cc-info">

		<a href='https://creativecommons.org/licenses/by-sa/4.0/' class="cc-icon-width" >
			<svg class="cc" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			viewBox="0 0 70.7 13.4" style="enable-background:new 0 0 70.7 13.4;" xml:space="preserve">

				<g>

				<g>
				<circle class="st0" cx="6.8" cy="6.7" r="6.1"/>
				<path d="M6.7,0c1.9,0,3.5,0.7,4.8,2c0.6,0.6,1.1,1.4,1.4,2.2c0.3,0.8,0.5,1.7,0.5,2.6c0,0.9-0.2,1.8-0.5,2.6
				c-0.3,0.8-0.8,1.5-1.4,2.1c-0.7,0.6-1.4,1.1-2.2,1.5c-0.8,0.3-1.7,0.5-2.6,0.5S5,13.3,4.2,12.9c-0.8-0.3-1.5-0.8-2.2-1.5
				s-1.1-1.4-1.5-2.2S0,7.6,0,6.7C0,5.8,0.2,5,0.5,4.2S1.3,2.6,2,2C3.3,0.7,4.8,0,6.7,0z M6.7,1.2c-1.5,0-2.8,0.5-3.9,1.6
				C2.3,3.4,1.9,4,1.6,4.6C1.4,5.3,1.2,6,1.2,6.7c0,0.7,0.1,1.4,0.4,2.1c0.3,0.7,0.7,1.3,1.2,1.8c0.5,0.5,1.1,0.9,1.8,1.2
				c0.7,0.3,1.4,0.4,2.1,0.4c0.7,0,1.4-0.1,2.1-0.4c0.7-0.3,1.3-0.7,1.8-1.2c1-1,1.6-2.3,1.6-3.9c0-0.7-0.1-1.4-0.4-2.1
				c-0.3-0.7-0.7-1.3-1.2-1.8C9.5,1.8,8.2,1.2,6.7,1.2z M6.6,5.6L5.7,6.1C5.6,5.9,5.5,5.7,5.4,5.6C5.3,5.6,5.1,5.5,5,5.5
				c-0.6,0-0.9,0.4-0.9,1.2c0,0.4,0.1,0.6,0.2,0.9C4.5,7.8,4.7,7.9,5,7.9c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4C6.5,8.1,6.2,8.3,5.9,8.5
				c-0.3,0.2-0.7,0.3-1,0.3c-0.6,0-1.1-0.2-1.5-0.6C3.1,7.9,2.9,7.4,2.9,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6
				C5.7,4.6,6.3,5,6.6,5.6z M10.5,5.6L9.6,6.1C9.5,5.9,9.4,5.7,9.3,5.6C9.1,5.6,9,5.5,8.9,5.5C8.3,5.5,8,5.9,8,6.7
				c0,0.4,0.1,0.6,0.2,0.9c0.2,0.2,0.4,0.3,0.7,0.3c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4c-0.2,0.3-0.4,0.6-0.7,0.8c-0.3,0.2-0.7,0.3-1,0.3
				c-0.6,0-1.1-0.2-1.5-0.6C7,7.9,6.8,7.4,6.8,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6C9.6,4.6,10.2,5,10.5,5.6z"/>
				</g>

				</g>
			</svg>
		</a>
		
		<a href='https://creativecommons.org/licenses/by-sa/4.0/'>Content:
		CC-BY-SA </a>
		
	</div>

</div>

    </div>

    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="overview">Overview</h1>

<blockquote>
<p><img src="../images/data-flow-simple.png" alt="Brain and Simulator" /></p>
</blockquote>

<p>Welcome to Inkling, Bonsai AI&rsquo;s special purpose programming language for training AI.</p>

<p>Inkling is a declarative, strongly typed programming language specifically designed for artificial intelligence (AI). It abstracts away the vast world of dynamic AI algorithms that require expertise in machine learning and enables more developers to program AI. An Inkling file contains the concepts &ndash; what you want to teach the AI &ndash; and the curriculum, &ndash; how you want to teach the concepts &ndash; necessary to train your BRAIN. Before you read through this section about the Inkling language, you should familiarize yourself with the various components of the Bonsai Artificial Intelligence Engine, which you can read about in our <a href="getting-started.html#the-bonsai-platform">Getting Started Guide</a>.</p>

<aside class="notice">
EMACS USERS: There is an inkling-mode for local development found on <a href="https://github.com/BonsaiAI/inkling-mode">Bonsai&rsquo;s GitHub</a>
</aside>

<p>If you&rsquo;re interesting in finding out more about what&rsquo;s going on under the hood of the Bonsai AI Engine, check out <a href="ai-engine-guide.html">Understand AI Engine Components</a>.</p>

<h2 id="inkling-a-new-language">Inkling: A New Language</h2>

<h3 id="what-kind-of-language-is-inkling">What kind of language is Inkling?</h3>

<p>Inkling is a special purpose language for writing AI programs. The language has a blend of declarative and functional styles; it&rsquo;s modeled after ideas in SQL and python. We like to describe Inkling as the world&rsquo;s first machine teaching language.  </p>

<h3 id="what-is-machine-teaching">What is Machine Teaching?</h3>

<p>Machine teaching is a new programming paradigm. It expresses the solution to a problem in terms of how you teach the computer to find the solution as opposed to how to calculate the solution. Machine teaching focuses on:</p>

<ul>
<li><strong>What do you want the computer to know?</strong>
Machine teaching captures the concepts and their relationship to each other and forms a directed graph of the concepts.</li>
</ul>

<p>Imagine learning to play baseball; there are a lot of concepts involved. It goes beyond just the rules of the game, and includes things like batting stance, bat grip, eye hand coordination, etc.</p>

<ul>
<li><strong>How do you go about teaching those things?</strong>
Machine teaching focuses on how the problem can be taught, not how it can be calculated.</li>
</ul>

<p>Imagine teaching a child to play baseball. You can&rsquo;t just explain the whole game to them and expect them to understand how to play. You&rsquo;d break down learning into pieces, and create a series of lessons that would help them learn how to play baseball.</p>

<p>Let&rsquo;s say, to start, you wanted to teach them the concept of hand-eye coordination. There would be a sequence of lessons to do this. You might start with a whiffle ball on a tee, progress to a tee that pops the ball up, move to underhand pitches, and then overhand pitches. You could continue to build upon your hand eye coordination concept with things like curved pitches, different styles of catching, and other exercises. It&rsquo;s all teaching one concept - hand-eye coordination - using <strong>progressive lessons</strong> to do so.</p>

<h3 id="inkling-is-a-special-purpose-language">Inkling is a Special Purpose Language</h3>

<p>Inkling is a special purpose language, meaning that it is a language for writing programs for a particular domain. This is as opposed to a general purpose language, which would allow you to write anything you could imagine. C++, Python, Ruby, and Java are all examples of general purpose programming languages.</p>

<h3 id="inkling-is-a-functional-language">Inkling is a Functional language</h3>

<p>In a functional programming language, a function defines a scope and can only modify what is in that scope. In Inkling, every concept takes data as input and sends data as output. Each concept is self contained, and there is no shared information between concepts unless you explicitly declare it. This means that no information is kept as state unless you specifically declare it. This makes Inkling a <a href="https://en.wikipedia.org/wiki/Functional_programming">functional programming</a> language.</p>

<p><strong>For example:</strong></p>

<ul>
<li>Python and Javascript can be programmed in a functional way, but they are not pure functional languages.</li>
<li>F# is a pure functional programming language.</li>
<li>R, matlab, Java and prolog are not functional programming languages.</li>
</ul>

<h3 id="white-space-insensitive">White Space Insensitive</h3>

<p>Inkling is white space insensitive. Internally, we prefer to use four spaces to indent lines. This is a stylistic choice. In this document, any mention of an &ldquo;indentation&rdquo; or a line &ldquo;being indented&rdquo; refers to using four spaces at the start of a line.</p>

          <h1 id="mental-models">Mental Models</h1>

<p>Mental models are a way of organizing concepts so that you can structure a solution to your AI problem as a workflow. Concepts are the ideas that you want to teach your BRAIN. When you create your concepts, you&rsquo;re going to start with the final concept that you want to teach your BRAIN and support it with other feature and skill concepts. These additional concepts appear upstream of your main concept, and the information output from those concepts helps the Bonsai AI Engine teach your main concept to your BRAIN. Mental Models enable you to determine and plan the concepts that are taught to your BRAIN.</p>

<p>For more information about Concepts, refer below to <a href="#concepts">Concepts</a> and the <a href="../references/inkling-reference.html#concepts">Concept Reference</a>.</p>

<h2 id="determining-mental-models">Determining Mental Models</h2>

<p>Your mental models should help you plan the concepts you&rsquo;re going to write in your Inkling file. Therefore, when you&rsquo;re determining your mental models, we suggest that you think about the condition that means the AI has successfully learned what you wanted it to learn. This could be:</p>

<ul>
<li>Learning to play a game</li>
<li>Learning to recognize what a handwritten digit is</li>
<li>Learning to tell if something is red or what color something is</li>
<li>Learning to save electricity in your home</li>
<li>Learning to manage a process to specific guidelines</li>
</ul>

<p>After you&rsquo;ve determined your success condition or criteria, you want to decide what the AI can do to prove it has successfully learned that condition. In a game, this could be, &ldquo;I think if the AI can get a high score, it has successfully learned to play the game.&rdquo; For recognizing red things, this could be, &ldquo;I think if the AI can successfully tell when something it is shown is red or not red it will have learned to recognize red things.&rdquo; This becomes your final <code class="prettyprint">concept</code>, and it also ties into your objective (reward), which measures how successful the AI is at learning this concept.</p>

<p>For more complex goals and many use cases, you need multiple concepts that all become part of training your final concept. These additional concepts support your final concept and can also reduce the time it takes to train your BRAIN. For more information about determining concepts, refer to the next chapter.</p>

<p>For each concept, you will need to determine what the AI needs to take in to make its decision and what the AI returns after it has decided. All of the information your AI needs to take in before it can train on any of the concepts is bundled together and labeled as <code class="prettyprint">input</code>. Each concept returns some information, but additional concepts feed their returned information to assist in training the final concept. Training on the final concept returns information that is sent from the BRAIN to the simulation. This is the <code class="prettyprint">output</code>.</p>

<p>Your mental model can be mapped from left to right, starting with your input. Your other concepts come next, followed by your final concept, and finally, to the right, is your output. Your output is fed back through the Bonsai AI Engine to the application. You can draw arrows between the various nodes to represent data flow. Your concepts are trained in order. To visualize this more clearly, see our expanded example below.</p>

<h2 id="examples">Examples</h2>

<h3 id="example-breakout">Example: Breakout</h3>
<pre class="highlight inkling tab-inkling"><code><span class="k">concept</span> <span class="nx">get_high_score</span>
  <span class="k">is</span> <span class="nx">classifier</span>   <span class="c1"># classifiers pick one of a small set of actions</span>
  <span class="k">predicts</span> <span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span>   <span class="c1"># this concept's output will be a move</span>
  <span class="k">follows</span> <span class="kr">input</span><span class="p">(</span><span class="nx">GameState</span><span class="p">)</span>
  <span class="k">feeds</span> <span class="kr">output</span>
<span class="k">end</span>
</code></pre>
<p>For example, our mental model for teaching an AI to play the game Breakout looks like this:</p>

<p><img src="../images/mental-model.png" alt="Mental model" /></p>

<p>Single concept model for learning breakout</p>

<p>The <code class="prettyprint">input</code> is a snapshot of the game in its current state.</p>

<p>The concept <code class="prettyprint">get_high_score</code>, is our final <code class="prettyprint">concept</code>. It describes what we want our BRAIN to learn to play the Breakout simulation, which means we&rsquo;ve decided that being able to get a high score means that it&rsquo;s learned how to play the game. This single concept mental model is sufficient to train a BRAIN to play the game, but this training may take a long time.</p>

<p>The <code class="prettyprint">output</code> is the move that the AI wants to make. It chooses from left, right, or no move. The input and output are described in the schemas portion of the Inkling file.</p>

<p>To speed up training time and enable to learn the <code class="prettyprint">get_high_score</code> concept more concretely, you can expand this mental model and include more concepts.</p>
<pre class="highlight inkling tab-inkling"><code><span class="k">concept</span> <span class="nx">get_high_score</span>
  <span class="k">is</span> <span class="nx">classifier</span>
  <span class="k">predicts</span> <span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span>
  <span class="k">follows</span> <span class="kr">input</span><span class="p">(</span><span class="nx">GameState</span><span class="p">),</span> <span class="nx">keep_paddle_under_ball</span>
  <span class="k">feeds</span> <span class="kr">output</span>
<span class="k">end</span>

<span class="k">concept</span> <span class="nx">keep_paddle_under_ball</span>
  <span class="k">is</span> <span class="nx">classifier</span>
  <span class="k">predicts</span> <span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span>
  <span class="k">follows</span> <span class="kr">input</span><span class="p">(</span><span class="nx">GameState</span><span class="p">),</span> <span class="nx">ball_location</span>
  <span class="k">feeds</span> <span class="kr">output</span>
<span class="k">end</span>
</code></pre>
<p>In this example, we&rsquo;ve added two extra concepts that support our final concept and give our BRAIN more information to work with. The concept of <code class="prettyprint">ball_location</code> feeds information into the concept <code class="prettyprint">keep_paddle_under_ball</code>, and that concept feeds information into <code class="prettyprint">get_high_score</code>.</p>

<p>The input remains the same as above. The AI has two additional concepts to train. When it is training the ball_location concept, it takes in the input and returns the coordinates of the ball. On the <code class="prettyprint">keep_paddle_under_ball</code> concept, it takes in the input and the ball coordinates from ball_location. Then, that concept returns the best move to attempt to keep the paddle underneath the ball. The final concept, <code class="prettyprint">get_high_score</code>, takes in the input and the move returned from <code class="prettyprint">keep_paddle_under_ball</code> and returns the move it wants, which is the output sent to the simulator through the Bonsai AI Engine. Each of these concepts are trained from input to output.</p>

          <h1 id="concepts">Concepts</h1>

<p>A <strong>concept</strong> in Inkling is an (abstract) idea. In Inkling, the concept defines what you are going to teach the AI. For more information about using the concept keyword, refer to the <a href="../references/inkling-reference.html#concepts">Concept Reference</a>.</p>

<p>Every Inkling program needs at least one concept. If there is more than one, determine which one is your main concept. You may have additional concepts to assist in teaching the main concept to your AI.</p>

<h2 id="fact-and-strategy">Fact and Strategy</h2>

<p>When you&rsquo;re thinking about concepts, you can categorize them into two groups: fact and strategy. A fact concept describes the <em><strong>state</strong></em> of a thing or things, such as an object, a ball, a character, an enemy, a light, a person, etc. The fact concept could be the state of whether that thing is on or off, is hot or cold, is a number or a letter, etc. It can also be a location. A strategy concept describes a <em><strong>method</strong></em> or <em><strong>behavior</strong></em>, such as &ldquo;avoid ghosts&rdquo;, &ldquo;keep the paddle under the ball&rdquo;, &ldquo;don&rsquo;t run into walls&rdquo;, &ldquo;turn lights off&rdquo;.</p>

<p>For a simulator, your final concept is a strategy concept. </p>

<h3 id="in-a-game">In a Game</h3>

<p>If you want to teach your AI to play a game, first choose a main concept. The result of the AI learning this concept should be that it knows how to play the game.</p>

<ul>
<li>A <strong>fact concept</strong> would describe something about the current state of the game.</li>
<li>A <strong>strategy concept</strong> would describe a behavior that, if learned, would help the AI achieve its goal.</li>
</ul>

<p>For example, consider an Inkling program that teaches an AI to play Pacman. This is a game where you eat dots and run away from ghosts, and the higher the score you get, the better you do. Your main concept could be to get a high score.</p>

<p>Supporting concepts might include <code class="prettyprint">eat_dots</code>, <code class="prettyprint">avoid_ghosts</code>, <code class="prettyprint">eat_fruit</code>, and <code class="prettyprint">avoid_blue_ghosts</code>. These are strategy concepts. You may also have concepts called <code class="prettyprint">dot_location</code>, <code class="prettyprint">ghost_location</code>, or <code class="prettyprint">ghost_color</code>. These are fact concepts.</p>

<p>You can use a mental model to help you plan out your concepts and data flow.</p>

<h2 id="determining-concepts">Determining Concepts</h2>

<p>Determining what concepts to teach may take time. You can use mental models to work out what concepts to write and how data should flow between them.</p>

<h2 id="examples">Examples</h2>

<h3 id="example-tetris">Example: Tetris</h3>

<p>Consider the game <a href="https://en.wikipedia.org/wiki/Tetris">Tetris</a>. The main concept we want to teach our AI will be the same as the main concept of PacMan. We want the AI to get the highest score possible. This represents that the AI has learned the game. To assist in teaching the main concept, we need to think through the various facts that the AI needs to learn. Here&rsquo;s a short list, but you might be able to think of other facts you&rsquo;d want to use:</p>

<ul>
<li><code class="prettyprint">active_tetrimino</code>: the tetrimino (piece) that is active. (fact)</li>
<li><code class="prettyprint">tetrimino_location</code>: the location of the active tetrimino. (fact)</li>
<li><code class="prettyprint">tetrimino_speed</code>: how fast the tetrimino is moving. (fact)</li>
<li><code class="prettyprint">clear_base</code>: fit tetriminos into the base to clear pieces of it. (strategy)</li>
</ul>

<p>Any of these facts could be written into supporting concepts that would give information to your main concept.</p>

<h3 id="example-home-automation">Example: Home Automation</h3>

<p>In our home automation example, let&rsquo;s imagine that we want to save energy by turning off the lights in empty rooms. Our main concept is going to be something like <code class="prettyprint">turn_off_lights_empty_rooms</code>. If the AI learns to do the main concept, then we&rsquo;ll have solved our problem. To support this main concept, we need to think about the various facts that the AI needs to know in order to accomplish that behavior. Here&rsquo;s a short list, but you might be able to think of other facts that you&rsquo;d want to use:</p>

<ul>
<li><code class="prettyprint">light_state</code>: the on/off state of the lights in each room. (fact)</li>
<li><code class="prettyprint">people_home</code>: The total number of people in the house. (fact)</li>
<li><code class="prettyprint">person_location</code>: The location of each person/the room each person is in. (fact)</li>
<li><code class="prettyprint">done_with_it</code>: The amount of time a person has been out of a room. Or, possibly, the location of the person who left this room. (fact)</li>
<li><code class="prettyprint">definitely_empty</code>: don&rsquo;t shut off lights if someone is coming right back. (strategy)</li>
<li><code class="prettyprint">still_in_use</code>: (a variant of the one above) don&rsquo;t turn off the lights if an empty room might be reoccupied soon.</li>
</ul>

<p>Any of these facts could be written into supporting concepts that would give information to your main concept.</p>

<h2 id="writing-concept-statements">Writing Concept Statements</h2>

<p>In Inkling, your concepts are written as concept statements. The Inkling concept statement includes an <strong>is</strong> clause which specifies whether the concept is a <strong>classifier</strong> or an <strong>estimator</strong>. This tells the AI what kind of information or prediction it is going to return.</p>

<p>In its simplest form, a classifier is taking in input and returning a classification. In reality, the classifier is taking in input and assigning a score to the possible classifications of that input from a given set. You would specify <code class="prettyprint">is classifier</code> on your concept if your outcome set is small and unchanging. For example, you want your AI to recognize a written number from 0-10. Your outcome set is 0,1,2,3,4,5,6,7,8,9,10. For every handwritten number that it is shown, it assigns a probability to each number and returns the most likely value (the one with the highest probability).</p>

<p>Estimators are used for larger outcome sets.  You would specify <code class="prettyprint">is estimator</code> on your concept if you are estimating a value in a very large range, like integers from 1 to 1000, or a continuous value like a fraction between 0 and 1. Estimators are often used for control. For example, if you need to turn a dial a certain amount, the AI has to return the direction and how much the dial is being turned. The direction is discrete, left or right, but the amount of turning could be modeled as an continuous number. </p>

<h2 id="determining-concept-statements">Determining Concept Statements</h2>

<p>Deciding what concepts to teach may take time. Use your mental models to work out what concepts to use.  After you&rsquo;ve created your mental model, you can write your schemas (input and output) as well as your concepts. You need to:</p>

<ul>
<li>pick a descriptive name for your concept.</li>
<li>determine whether it is a <code class="prettyprint">classifier</code> or <code class="prettyprint">estimator</code></li>
<li>know where it comes in the mental model, and list any concepts that come before it.</li>
</ul>

<p>Every concept is trained by a curriculum. These will be covered below.</p>

<p>For more information on the concept statement, see the <a href="../references/inkling-reference.html#concepts">Concept Reference</a>.</p>

          <h1 id="schemas">Schemas</h1>

<p>Schemas describe a record and its fields. They contain a set of named data types that can be used throughout the system. They can include the common basic data types and native data types for working with common media formats (images, audio recordings). You add schemas in Inkling using the <code class="prettyprint">schema</code> keyword.</p>

<p>Types (or <a href="https://en.wikipedia.org/wiki/Data_type">data types</a>) are representations of values of data. A type informs the system what the meaning of the data is, the possible values of that data is, what operations can be performed on that data, and the way the data can be stored. Types are the most basic building blocks of data manipulation.</p>

<p>In Inkling we need types, because the AI needs to understand the data it is sent. Also the AI needs to know how to represent the prediction it sends back to the program that you have deployed it with.</p>

<p>Inkling is also a strongly typed language, which means that you will receive an error if values are not compatible with their expected type. This means you need to pay attention to what types you choose.</p>

<p>Inkling supports various types, including (but not limited to) primitive types, which include types for integers, floats, bytes and strings, as well as types commonly used with machine learning (for example, Luminance). See the section on <a href="../references/inkling-reference.html#types">Inkling types</a> for more information.</p>

<h2 id="constrained-types">Constrained Types</h2>

<p>Inkling supports <a href="../references/inkling-reference.html#constrained-types-and-range-expressions">constrained types</a> in schemas (as well as for configuration of lessons). Constrained types use range expressions to constrain the values of the type to values defined by a range expression.</p>

<p>A range expression has the effect of constraining the values of the type to values defined by the range expression. In a schema, this constrains the values in the field. In lessons, this constrains the values of the placeholder being configured. In both cases the syntax is the same.</p>

<p>Here are some examples of constrained types:</p>
<pre class="highlight inkling tab-inkling"><code><span class="k">schema</span> <span class="nx">MyOutput</span>
  <span class="kr">UInt8</span>  <span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>   <span class="nx">label</span><span class="p">,</span>    <span class="c1"># a list of UInt8 values</span>
  <span class="kr">Int64</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">100</span><span class="p">}</span>   <span class="nx">x</span><span class="p">,</span>        <span class="c1"># start:step:stop, {0,5,10,...,95,100}</span>
  <span class="kr">Int64</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">}</span>     <span class="nx">y</span><span class="p">,</span>        <span class="c1"># start:stop, default step= 1, {0,1,...,99,100}</span>
  <span class="kr">Int64</span>  <span class="p">{</span><span class="mi">0</span><span class="p">..</span><span class="mi">100</span><span class="p">:</span><span class="mi">25</span><span class="p">}</span> <span class="nx">z</span><span class="p">,</span>        <span class="c1"># start..stop:numsteps, so step= 4, {0,4,8,...,96,100}</span>
  <span class="kr">Float32</span> <span class="p">{</span><span class="mi">0</span><span class="p">..</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>    <span class="nx">a</span>         <span class="c1"># start..stop:numsteps, gives {0, 0.5, 1.0, 1.5, 2.0}</span>
<span class="k">end</span>
</code></pre>
<h2 id="defining-schemas">Defining Schemas</h2>

<p>Examine the input, returned data, and output of your mental model when defining your schemas. You need to match these requirements to Inkling types.</p>

<h3 id="inputs-and-outputs">Inputs and Outputs</h3>

<p><strong>Input</strong> is a stream of information that is fed into your BRAIN (your AI). The Bonsai AI Engine uses this information to help train the BRAIN or make a prediction.</p>

<p>In Inkling, <strong>Output</strong> is a stream of information returned as a prediction that your BRAIN sends back to an application. It could be sent back to a simulator, if training is in process, or it could be send back to your deployed application, where it might be used for control or optimization. The data in input and output streams are described by schemas. Schemas are declared in your Inkling program, and they contain information about the data types contained in the stream. For example, if you want to teach your AI,  to recognize the shape &lsquo;square&rsquo;, you might give it a picture of a shape. That picture would be an input. The BRAIN answers yes (this is a square) or no (this is not a square). That answer is the output. Your Inkling file to teach your AI would contain one schema for describing the data type of the input (Luminance, an image type) and another for the output (Bool). For more information about schemas, refer to the <a href="../references/inkling-reference.html#schemas">Schema Reference</a>.</p>

<h3 id="how-to-pick-types">How to pick types</h3>

<ul>
<li>If your output is yes/no, true/false, or another dual relationship, you should use the <code class="prettyprint">bool</code> type.</li>
<li>Inkling supports signed and unsigned integers of various sizes as well as floating point (32 and 64 bit). More details can be found under <a href="../references/inkling-reference.html#types">Inkling Types</a>.</li>
</ul>

          <h1 id="curriculum-and-lessons">Curriculum and Lessons</h1>

<p>A <strong>curriculum</strong> in Inkling is used to define what and how to teach a concept. Each concept needs a corresponding curriculum to teach it, and every Inkling program must contain at least one curriculum. A <strong>lesson</strong> is part of a curriculum; it teaches a specific piece of the concept by specifying training and testing parameters and a stopping point (<strong>until</strong>). Lessons enable the AI to learn the concept bit-by-bit instead of all at once. Lessons are contained within curriculum statements. Each curriculum must contain at least one lesson.</p>

<p>Curriculum contain the lesson plan for the lessons that you are using to train your BRAINs. You must have one curriculum for every concept. A curriculum contains information about the training material that you&rsquo;re using to train the BRAIN; this is a simulator, generator, or data set, and it contains an objective, which measures the performance of the BRAIN as it learns your concept. Curricula may also contain expressions that assign portions of your training material for testing. Finally, your curriculum contains lessons. Each lesson teaches a piece of the concept. A curriculum can contain multiple lessons to teach a single concept.  Each lesson may contain different configurations for training the BRAIN. Configurations change how the Bonsai AI Engine uses the training source for training.</p>

<aside class="notice">
Currently, during the Bonsai Platform preview, you can only train with simulators as your training sources. Additionally, you are limited to one lesson in your curriculum.
</aside> 

<h2 id="determining-curriculum">Determining Curriculum</h2>

<p>Each curriculum trains a single concept, and every concept must have a curriculum. After you&rsquo;ve determined your concepts, you will know how many curricula you need for your Inkling program. Curricula contain the information the Bonsai AI Engine uses to train your BRAIN on the concepts you&rsquo;ve specified. They also specify the reward function (<strong>objective</strong>) for teaching a given concept. The reward function is a way the system concretely measures the AI&rsquo;s performance as it learns the concept.</p>
<pre class="highlight inkling tab-inkling"><code><span class="k">curriculum</span> <span class="nx">balance_curriculum</span>
    <span class="k">train</span> <span class="nx">balance</span>
    <span class="k">with</span> <span class="k">simulator</span> <span class="nx">cartpole_simulator</span><span class="p">(</span><span class="nx">CartPoleConfig</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nx">GameState</span><span class="p">)</span>
    <span class="k">objective</span> <span class="nx">open_ai_gym_default_objective</span>
      <span class="c1">#lessons</span>
<span class="k">end</span>
</code></pre>
<p>For more information and examples, refer to the <a href="../references/inkling-reference.html#curriculums">Curriculum Reference</a>.</p>

<h2 id="determining-lessons">Determining Lessons</h2>

<p>Each lesson specifies a portion of the training and, depending on the training sources, may contain information on configuring the training sources, training, testing, and a stopping point (<strong>until</strong>). When you&rsquo;re determining your lessons, you need to consider what your training sources are and what piece of the concept you are training. For example, if you&rsquo;re training with a simulator, you can place constraints on your simulation during training.</p>

<h3 id="configure-clause">Configure Clause</h3>

<p>The configure clause is part of a lesson statement. They inform the computer how to set up the simulator for training. You use configure to make sure you&rsquo;re not always training from the beginning, but from a point that makes sense to enhance how your BRAIN is learning the concepts.</p>

<p>The configure clause uses the <strong>constrain</strong> keyword to create a set of conditions for the AI to train on the simulator. <strong>constrain</strong> references a schema that is associated with the simulator.</p>
<pre class="highlight inkling tab-inkling"><code><span class="k">lesson</span> <span class="nx">get_high_score</span>
  <span class="k">configure</span>
    <span class="k">constrain</span> <span class="nx">episode_length</span> <span class="k">with</span> <span class="kr">Int8</span><span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span>
    <span class="k">constrain</span> <span class="nx">deque_size</span> <span class="k">with</span> <span class="kr">UInt8</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
  <span class="k">until</span>
    <span class="k">maximize</span> <span class="nx">open_ai_gym_default_objective</span>
</code></pre>
<p>The configure clause supports placeholders as well. The placeholder name does not hold a specific value, but is a name of a range of values that the the Bonsai AI Engine inputs during training. The configure clause provides guidance to the Bonsai AI Engine on how the training for that lesson should be configured. It is not the same as an assignment in an imperative language, because it does not represent a unique value. The AI Engine has some degree of freedom in determining how to configure for training.</p>

<p>For more information and examples, refer to the <a href="../references/inkling-reference.html#curriculums">Lesson Reference</a>.</p>

<h2 id="objectives">Objectives</h2>

<p>The <strong>objective</strong>, often known in machine learning (ML) as the <strong>reward function</strong>, measures how well the AI is doing at learning the concept. Or, put differently, it is what you use to reward the AI.</p>

<p>This idea may be easier to understand with a few examples:</p>

<p>In our Breakout example, our concept was get_high_score. The <strong>score</strong> is how we are measuring how well the AI is doing at learning that concept.</p>

<p>If we are teaching the AI Pacman, and we are training the concept of <code class="prettyprint">avoid_non_blue_ghosts</code>, we may measure how well the AI is doing at learning this concept by measuring the amount of time the AI manages to avoid non-blue ghosts. Our objective clause uses <strong>time</strong> as the reward.</p>

<p>In these examples, the objective, or reward, is one of the factors we use to measure how well the AI is training on the concept.</p>

<h6 id="determining-objectives">Determining Objectives</h6>

<p>There are several factors you can use to determine what your objective should be. Before you even start determining your objectives, you need to know what your concepts and curricula are. A good objective should reward the AI more often and be proportional to the quality of of the behavior.</p>

<h3 id="frequency-of-feedback">Frequency of Feedback</h3>

<p>The frequency of feedback affects the speed of training. Ideally, the time between the AI&rsquo;s decision making and whether or not the decision was good needs to be kept short.  For example, if you&rsquo;re teaching an AI to play Pacman, you want to choose an objective like <code class="prettyprint">score</code> instead of an objective like <code class="prettyprint">beat level</code>: in Pacman, your score changes often, typically many times during a level, but your level can only change 256 times, and only after many many actions. Your AI would have to beat an entire level to be rewarded, which is difficult to do without getting intermediate feedback about which actions along the way were good ones. </p>

<h3 id="proportional-feedback">Proportional Feedback</h3>

<p>The reward should be in proportional to the quality of the behavior (or the correctness of the behavior). When you are deciding what your objective is going to be, you need to consider that the AI will learn exactly what you ask it to learn. This can result in learning what you specified but not necessarily what you wanted. For example, if you ask an AI to play Pong (controlling both agents), and you use the objective of <code class="prettyprint">game time</code>, the AI may learn that to get the longest time played, the paddle should remain in the same place. The ball will bounce back and forth between the two unmoving paddles &ndash; the AI learned exactly what you told it to learn, how to maximize the amount of time, but it didn&rsquo;t really learn how to play the game.</p>

<h3 id="in-inkling">In Inkling</h3>

<p>In an Inkling program, your objective is going to be part of your curriculum statement.</p>
<pre class="highlight inkling tab-inkling"><code><span class="k">curriculum</span> <span class="nx">_curriculumName</span>
    <span class="k">train</span> <span class="nx">_conceptName</span>
    <span class="k">with</span> <span class="nx">_trainingSpecifier</span>
  <span class="k">objective</span> <span class="nx">_objectiveName</span>
    <span class="c1"># lessons are specified here.</span>
<span class="k">end</span>
</code></pre>
          <h1 id="next-steps">Next Steps</h1>

<p>Now that you’ve reviewed this guide, you can:</p>

<p>Check out our <a href="https://www.youtube.com/watch?v=E_JtPzT5-dg&amp;index=3&amp;list=PLAktfMEMCsOY9HUZKIuGI6yqefGBuszAV"><strong>Advanced Platform Techniques</strong></a> (YouTube link) video to help you build and run complex Inkling on the Platform.</p>

<p>And we have these other resources that will enable you to maximize your AI development experience:</p>

<ul>
<li><a href="../references/inkling-reference.html">Inkling Reference</a></li>
<li>VIDEO: <a href="https://www.youtube.com/watch?v=0R3PnJEisqk&amp;list=PLAktfMEMCsOY9HUZKIuGI6yqefGBuszAV&amp;index=4">Writing Great Reward Functions</a></li>
<li><a href="../examples.html">Bonsai Platform Examples</a></li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>

    </div>

  </div>
  <!-- at the end of the BODY -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
  apiKey: '49fa6f01d7ff94a85b9b7434b1c2b7cf',
  indexName: 'bon-sai',
  inputSelector: '#docs-search',
  debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>
  </body>
</html>
