@startuml simulator_state
    [*] --> init
    init --> episode_start
    init: `sim = Simulator(brain)
    init: `while sim.run():
    init: `  pass


    episode_start -right-> simulate
    episode_start: `def episode_start(params):
    episode_start: `  return initial_state

    simulate --> simulate: not terminal
    simulate: `def simulate(action):
    simulate: `  return state, reward, terminal

    simulate --> episode_terminal: is terminal
    simulate --> episode_terminal: no more actions

    episode_terminal --> episode_start: next episode
    episode_terminal --> finished: no more episodes

    finished --> [*]
@enduml