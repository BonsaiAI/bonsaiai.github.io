


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Library Reference - Bonsai</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
	<link href="../stylesheets/test.css" rel="stylesheet" media="screen" />
    <link href="../favicon.ico" rel="icon" type="image/ico" />
      <script src="../javascripts/all.js"></script>
	
	<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WVB6MG2');</script>
<!-- End Google Tag Manager -->
	
  </head>

  <body class="references references_library-reference" data-languages="[&quot;python&quot;]">
	  
	  
	  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVB6MG2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --> 

  <div id="flex-container">

	<nav id="primary-nav">



	<div id="logo"> <a href="../"><img class="bonsai-logo" src="../images/bonsai-logo.svg"></a></div>

	<label for="drop" class="toggle"><img class="menu-ham" src="../images/menu.svg"></label>
	<input type="checkbox" id="drop" />

	<ul class="menu">

		<li class="header_menu_item "> <a href="../guides/getting-started.html">Getting Started</a></li>

	
		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-1" class="toggle">Guides +</label><a  href="#">Guides</a>			
			<input type="checkbox" id="drop-1"/>
			<ul id="guides">
				<li class=""> <a href="../guides/ai-engine-guide.html">A.I. Engine Guide</a>  </li>
				<li class=""> <a href="../guides/getting-started.html">Getting Started</a>  </li>
				<li class=""> <a href="../guides/inkling-guide.html">Inkling Guide</a>  </li>
			</ul> 
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-1" class="toggle">References +</label><a  href="#">References</a>			
			<input type="checkbox" id="drop-1"/>
			<ul id="references">
				<li class=""> <a href="api-reference.html">API</a>  </li>
				<li class=""> <a href="cli-reference.html">CLI</a>  </li>
				<li class=""> <a href="inkling-reference.html">Inkling</a>  </li>
				<li class="selected"> <a href="library-reference.html">Library</a>  </li>
			</ul> 
		</li>
		
		<li class="header_menu_item "> <a href="../examples.html">Examples</a></li>

		<li><gcse:search></gcse:search></li>


	</ul>

</nav>





	<div id="main-wrapper">

    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">

        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
      
			 
<ul class="toc-footer">

<li><a href='https://bons.ai/sign-up'>Sign Up for our Private Beta!</a></li>
<li><a href='https://github.com/BonsaiAI/slate'>Contribute to the Docs</a></li>
<li><a href='http://forums.bons.ai/'>Bonsai Forums</a></li>
<li><a href='mailto:support@bons.ai?subject=I need help with'>Email Us</a></li>
<li><a href='https://bons.ai'>Bonsai Home</a></li>

</ul>
       
        
	   <div class="cc-bottom"><ul class="toc-footer bottom">
<li><a href='https://creativecommons.org/licenses/by-nc-sa/4.0/'>Content:
	<span>CC-BY-NC-SA 4.0</span></a></li>	

<li><a href='https://creativecommons.org/licenses/by-nc-sa/4.0/'>
<svg class="cc" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 70.7 13.4" style="enable-background:new 0 0 70.7 13.4;" xml:space="preserve">

<g>
	<g>
		<circle class="st0" cx="63.8" cy="6.7" r="6.1"/>
		<g>
			<path d="M63.9,0c1.9,0,3.5,0.7,4.8,2c1.3,1.3,2,2.9,2,4.8c0,1.9-0.6,3.5-1.9,4.7c-1.4,1.3-3,2-4.8,2c-1.8,0-3.4-0.7-4.7-2
				c-1.3-1.3-2-2.9-2-4.7c0-1.8,0.7-3.4,2-4.8C60.5,0.7,62.1,0,63.9,0z M64,1.2c-1.5,0-2.8,0.5-3.9,1.6c-1.1,1.1-1.6,2.4-1.6,3.9
				c0,1.5,0.5,2.8,1.6,3.9c1.1,1.1,2.4,1.6,3.9,1.6c1.5,0,2.8-0.5,3.9-1.6c1.1-1,1.6-2.3,1.6-3.9c0-1.5-0.5-2.8-1.6-3.9
				C66.8,1.8,65.5,1.2,64,1.2z M61,5.8c0.1-0.8,0.5-1.5,1-1.9c0.5-0.5,1.2-0.7,2-0.7c1.1,0,1.9,0.3,2.5,1c0.6,0.7,0.9,1.6,0.9,2.6
				c0,1-0.3,1.9-1,2.6c-0.6,0.7-1.5,1-2.5,1c-0.8,0-1.4-0.2-2-0.7c-0.6-0.5-0.9-1.1-1-1.9h1.7c0,0.8,0.5,1.2,1.5,1.2
				c0.5,0,0.9-0.2,1.1-0.6c0.3-0.4,0.4-1,0.4-1.6c0-0.7-0.1-1.3-0.4-1.6c-0.3-0.4-0.6-0.6-1.1-0.6c-0.9,0-1.4,0.4-1.5,1.2h0.5
				l-1.3,1.3l-1.3-1.3L61,5.8L61,5.8z"/>
		</g>
	</g>
	<g>
		<circle class="st0" cx="25.8" cy="6.8" r="5.9"/>
		<g>
			<path d="M25.8,0c1.9,0,3.5,0.6,4.8,1.9c1.3,1.3,2,2.9,2,4.8c0,1.9-0.6,3.5-1.9,4.7c-1.4,1.3-3,2-4.8,2c-1.8,0-3.4-0.7-4.7-2
				c-1.3-1.3-2-2.9-2-4.7c0-1.8,0.7-3.4,2-4.8C22.3,0.6,23.9,0,25.8,0z M25.8,1.2c-1.5,0-2.8,0.5-3.9,1.6c-1.1,1.1-1.6,2.4-1.6,3.9
				c0,1.5,0.5,2.8,1.6,3.9c1.1,1.1,2.4,1.6,3.9,1.6c1.5,0,2.8-0.5,3.9-1.6c1.1-1,1.6-2.3,1.6-3.9c0-1.5-0.5-2.8-1.6-3.9
				C28.6,1.7,27.3,1.2,25.8,1.2z M27.6,5v2.7h-0.8v3.3h-2.1V7.8H24V5c0-0.1,0-0.2,0.1-0.3c0.1-0.1,0.2-0.1,0.3-0.1h2.8
				c0.1,0,0.2,0,0.3,0.1C27.6,4.8,27.6,4.9,27.6,5z M24.9,3.3c0-0.6,0.3-0.9,0.9-0.9s0.9,0.3,0.9,0.9c0,0.6-0.3,0.9-0.9,0.9
				S24.9,3.9,24.9,3.3z"/>
		</g>
	</g>
	<g>
		<circle class="st0" cx="6.8" cy="6.7" r="6.1"/>
		<path d="M6.7,0c1.9,0,3.5,0.7,4.8,2c0.6,0.6,1.1,1.4,1.4,2.2c0.3,0.8,0.5,1.7,0.5,2.6c0,0.9-0.2,1.8-0.5,2.6
			c-0.3,0.8-0.8,1.5-1.4,2.1c-0.7,0.6-1.4,1.1-2.2,1.5c-0.8,0.3-1.7,0.5-2.6,0.5S5,13.3,4.2,12.9c-0.8-0.3-1.5-0.8-2.2-1.5
			s-1.1-1.4-1.5-2.2S0,7.6,0,6.7C0,5.8,0.2,5,0.5,4.2S1.3,2.6,2,2C3.3,0.7,4.8,0,6.7,0z M6.7,1.2c-1.5,0-2.8,0.5-3.9,1.6
			C2.3,3.4,1.9,4,1.6,4.6C1.4,5.3,1.2,6,1.2,6.7c0,0.7,0.1,1.4,0.4,2.1c0.3,0.7,0.7,1.3,1.2,1.8c0.5,0.5,1.1,0.9,1.8,1.2
			c0.7,0.3,1.4,0.4,2.1,0.4c0.7,0,1.4-0.1,2.1-0.4c0.7-0.3,1.3-0.7,1.8-1.2c1-1,1.6-2.3,1.6-3.9c0-0.7-0.1-1.4-0.4-2.1
			c-0.3-0.7-0.7-1.3-1.2-1.8C9.5,1.8,8.2,1.2,6.7,1.2z M6.6,5.6L5.7,6.1C5.6,5.9,5.5,5.7,5.4,5.6C5.3,5.6,5.1,5.5,5,5.5
			c-0.6,0-0.9,0.4-0.9,1.2c0,0.4,0.1,0.6,0.2,0.9C4.5,7.8,4.7,7.9,5,7.9c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4C6.5,8.1,6.2,8.3,5.9,8.5
			c-0.3,0.2-0.7,0.3-1,0.3c-0.6,0-1.1-0.2-1.5-0.6C3.1,7.9,2.9,7.4,2.9,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6
			C5.7,4.6,6.3,5,6.6,5.6z M10.5,5.6L9.6,6.1C9.5,5.9,9.4,5.7,9.3,5.6C9.1,5.6,9,5.5,8.9,5.5C8.3,5.5,8,5.9,8,6.7
			c0,0.4,0.1,0.6,0.2,0.9c0.2,0.2,0.4,0.3,0.7,0.3c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4c-0.2,0.3-0.4,0.6-0.7,0.8c-0.3,0.2-0.7,0.3-1,0.3
			c-0.6,0-1.1-0.2-1.5-0.6C7,7.9,6.8,7.4,6.8,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6C9.6,4.6,10.2,5,10.5,5.6z"/>
	</g>
	<g>
		<circle class="st0" cx="44.9" cy="6.8" r="6.2"/>
		<g>
			<path d="M44.9,0c1.9,0,3.5,0.6,4.8,1.9c1.3,1.3,2,2.9,2,4.8c0,1.9-0.6,3.5-1.9,4.7c-1.4,1.3-3,2-4.8,2c-1.8,0-3.4-0.7-4.7-2
				c-1.3-1.3-2-2.9-2-4.7c0-1.8,0.7-3.4,2-4.8C41.4,0.6,43,0,44.9,0z M39.7,4.9c-0.2,0.6-0.3,1.2-0.3,1.8c0,1.5,0.5,2.8,1.6,3.9
				c1.1,1.1,2.4,1.6,3.9,1.6c1.5,0,2.8-0.5,3.9-1.6c0.4-0.4,0.7-0.8,0.9-1.2l-2.5-1.1c-0.1,0.4-0.3,0.8-0.6,1
				c-0.3,0.3-0.7,0.4-1.2,0.5v1h-0.8v-1c-0.7,0-1.4-0.3-2-0.8L43.4,8c0.4,0.4,0.9,0.6,1.5,0.6c0.2,0,0.4-0.1,0.6-0.2
				c0.2-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.3-0.2-0.4l-0.6-0.3l-0.8-0.4l-1.1-0.5L39.7,4.9z M44.9,1.2c-1.5,0-2.8,0.5-3.9,1.6
				c-0.3,0.3-0.5,0.6-0.7,0.9l2.6,1.2c0.1-0.4,0.3-0.6,0.6-0.8c0.3-0.2,0.7-0.3,1.1-0.4v-1h0.8v1c0.6,0,1.2,0.2,1.7,0.6l-0.9,0.9
				c-0.4-0.3-0.8-0.4-1.2-0.4c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.2,0.2-0.2,0.4c0,0.1,0,0.1,0.1,0.2l0.9,0.4l0.6,0.3l1.1,0.5l3.4,1.5
				c0.1-0.5,0.2-1,0.2-1.4c0-1.5-0.5-2.8-1.6-3.9C47.7,1.7,46.4,1.2,44.9,1.2z"/>
		</g>
	</g>
</g>
</svg>
</li></a></ul></div>

    </div>
	      
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="python-library-overview">Python Library Overview</h1>

<p>The Python library wraps the API to simplify the process of building simulators
in the Python programming language.  Compatible with Python 2.7+</p>

<p>When the AI Engine trains with the simulator it works in a loop. First, the
simulator connects and registers itself with the AI Engine. Then, the simulator
sends the AI Engine a state and the value of any objectives or rewards; next,
the AI Engine replies with an action. The simulator then uses this action to
advance the simulation and compute a new state. This &ldquo;send state, receive
action&rdquo; process is repeated until training stops.  At any time the AI engine
may stop, reconfigure, and reset the simulator.  After doing so it will either
restart this training loop or stop training.  A training loop is sometimes
referred to as an &ldquo;iteration&rdquo;.</p>

<h1 id="simulator-class">Simulator Class</h1>
<pre class="highlight python tab-python"><code><span class="k">class</span> <span class="nc">FindCenterSimulator</span><span class="p">(</span><span class="n">bonsai</span><span class="o">.</span><span class="n">Simulator</span><span class="p">):</span>
    <span class="s">""" A simulator to teach an AI to find the mean of two values.
    """</span>
</code></pre>
<p>This class provides an interface for the event handling and responses required
to connect a simulator with the AI Engine.  Any methods added to classes that
inherit from <code class="prettyprint">bonsai.Simulator</code> that are not specified below are eligible
objectives (i.e. reward functions).</p>

<h2 id="start">start()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Start the episode by initializing value to a random number
            between the min and max.
        """</span>
        <span class="k">pass</span>
</code></pre>
<p>Called by the AI Engine to start the simulator at the start of a train or test
pass.  <code class="prettyprint">start</code> is called for the first time at the beginning of training and is
also the last of the stop, set_properties, reset, start message sequence sent
from the AI Engine in between training and test passes.</p>

<h2 id="stop">stop()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Stop is called after a training session is complete.
            This simple game requires no cleanup after training.
        """</span>
        <span class="k">pass</span>
</code></pre>
<p>Called by the AI Engine to stop training or testing. Training is also the first
callback of the stop, set_properties, reset, start message sequence sent by the
AI Engine between training and test passes.</p>

<h2 id="reset">reset()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Reset is called to reset simulator state before the next training 
            session.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span><span class="p">)</span>
</code></pre>
<p>Called by the AI Engine to reset simulator state in between training and test
passes.</p>

<h2 id="set_properties-kwargs">set_properties(**kwargs)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">set_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s">""" Reset is called to reset simulator state before the next training 
            session.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">'min'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">'max'</span><span class="p">]</span>
</code></pre>
<p>Called by the AI Engine. to configure the simulation before training is started
or restarted. <code class="prettyprint">set_properties</code> is called for the first time at the beginning of
training and is also called as part of the stop, set_properties, reset, start
message sequence sent from the AI Engine between training and test passes. See
the <a href="inkling-referece.html#lesson-configure-clause-syntax">configure clause of the lesson statement</a> in this simulator&rsquo;s
accompanying curriculums to get more information about the values in <code class="prettyprint">kwargs</code>.</p>

<h2 id="advance-actions">advance(actions)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">advance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="s">""" Function to make a move based on output from the BRAIN as
        defined in the Inkling file.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">:</span>
            <span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="n">actions</span><span class="p">[</span><span class="s">"delta"</span><span class="p">]</span>
</code></pre>
<p>Advance the simulation forward one tick. <code class="prettyprint">actions</code> contains a dictionary of key
values as defined by this simulator&rsquo;s action schema in Inkling.</p>

<h2 id="get_state">get_state()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">get_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Gets the state of the simulator, whether it be a valid value or
            terminal ("game over") state.
        """</span>
        <span class="k">return</span> <span class="n">SimState</span><span class="p">(</span>
                 <span class="n">state</span><span class="o">=</span><span class="p">{</span><span class="s">"value"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">"min"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">,</span> <span class="s">"max"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span><span class="p">},</span>
                 <span class="n">is_terminal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">)</span>
</code></pre>
<p>Returns a <a href="#simstate">SimState</a> containing the state of the simulation computed after
the last call to <code class="prettyprint">advance</code>. <code class="prettyprint">SimState</code> contains a <code class="prettyprint">state</code> and an <code class="prettyprint">is_terminal</code>
flag. <code class="prettyprint">state</code> is a dictionary matching the state schema as defined in an
Inkling <code class="prettyprint">simulator</code> statement within an Inkling program. <code class="prettyprint">is_terminal</code> is only
true when the simulator is in a &ldquo;game over&rdquo; state. Any cleanup of the
<code class="prettyprint">is_terminal</code> state should be handled by <code class="prettyprint">advance</code> or <code class="prettyprint">get_state</code>. Each call
to <code class="prettyprint">get_state</code> gets the state of an &ldquo;iteration&rdquo; of training.  An &ldquo;episode&rdquo; is
a collection of iterations. Episodes are bounded by states where <code class="prettyprint">is_terminal</code>
is true.</p>

<h2 id="objectives-reward-functions">Objectives (Reward Functions)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">distance_to_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Distance between the current value, as adjusted by the BRAIN and
            the desired value (the mean between min and max)
        """</span>
        <span class="n">goal</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">goal</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre>
<p>Any methods added to this class that are not named with one of the above
method names are eligible to be called as a reward function.  To be called,
the name of the function specified in an Inkling <code class="prettyprint">lesson</code> must match the name
of the method.  Reward functions specified in Inkling but not implemented on a
<code class="prettyprint">Simulator</code> class will result in an error.</p>

<h2 id="simstate">SimState</h2>

<p>A named tuple returned by <code class="prettyprint">Simulator.get_state</code>.</p>

<h3 id="state">state</h3>

<p>A dictionary matching the state schema as defined in an Inkling <code class="prettyprint">simulator</code>
statement within an Inkling program.</p>

<h3 id="is_terminal">is_terminal</h3>

<p><code class="prettyprint">True</code> when the simulator is in a &ldquo;game over&rdquo; state; otherwise <code class="prettyprint">False</code>.</p>

<h1 id="running-the-simulator">Running the Simulator</h1>

<h2 id="run_for_training_or_prediction-name-simulator_or_generator">run_for_training_or_prediction(name, simulator_or_generator)</h2>
<pre class="highlight python tab-python"><code><span class="n">simulator</span> <span class="o">=</span> <span class="n">FindCenterSimulator</span><span class="p">()</span>
<span class="n">bonsai</span><span class="o">.</span><span class="n">run_for_training_or_prediction</span><span class="p">(</span><span class="s">"inverted_pendulum_simulator"</span><span class="p">,</span>
                                      <span class="n">simulator</span><span class="p">)</span>
</code></pre>
<p>Connects to the AI Engine and identifies as <code class="prettyprint">name</code>. The <code class="prettyprint">name</code> of this
simulator must be the same in Inkling as it is in this function call.
<code class="prettyprint">simulator_or_generator</code> is a reference to an instance of the simulator. This
call blocks and drives the simulator loop until training stops.</p>

<h1 id="example">Example</h1>

<p>For a more complete example of the <code class="prettyprint">FindCenterSimulation</code>, see <a href="../examples.html#find-the-center-example">examples</a>.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>

    </div>

  </div>

  </body>
</html>
