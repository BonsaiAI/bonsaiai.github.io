


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SDK1 Legacy Library Reference - Bonsai</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
	  <link href="../stylesheets/test.css" rel="stylesheet" media="screen" />
    <link href="../favicon.ico" rel="icon" type="image/ico" />
      <script src="../javascripts/all.js"></script>

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WVB6MG2');</script>
<!-- End Google Tag Manager -->
      <!-- start Mixpanel -->
<script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("91fbf7b68fb2356f91916026f221ddd5", {
    loaded: function(mixpanel) {
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        distinct_id = getParameterByName('refUserId');
        if (distinct_id) {
          mixpanel.identify(distinct_id);
        }
    }
});</script>
<!-- end Mixpanel -->

  </head>

  <body class="sdk1 sdk1_library-reference" data-languages="[]">


	  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVB6MG2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --> 

  <div id="flex-container">

	<nav id="primary-nav">



	<div id="logo"> <a href="../"><img class="bonsai-logo" src="../images/bonsai-logo.svg"></a></div>

	<label for="drop" class="toggle"><img class="menu-ham" src="../images/menu.svg"></label>
	<input type="checkbox" id="drop" />

	<ul class="menu">

		<li class="header_menu_item "> <a href="../guides/getting-started.html">Quick Start</a></li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-1" class="toggle">Tutorials +</label><a  href="#">Tutorials</a>
			<input type="checkbox" id="drop-1"/>
			<ul id="tutorials">
				<li class=""> <a href="../guides/cli-install-guide.html">Install the CLI</a>  </li>
				<li class=""> <a href="../guides/sdk-install-guide.html">Install the SDK</a>  </li>
				<li class=""> <a href="../tutorials/tutorial1.html">Running Simulations and Writing Inkling</a>  </li>
				<li class=""> <a href="../guides/local-dev-guide.html">Run the Platform Locally</a>  </li>
				<li class=""> <a href="../guides/jupyter-api-guide.html">Use Bonsai's API with Jupyter</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-2" class="toggle">Guides +</label><a  href="#">Guides</a>
			<input type="checkbox" id="drop-2"/>
			<ul id="guides">
				<li class=""> <a href="../guides/simulation-guide.html">Learn About Simulation Requirements</a>  </li>
				<li class=""> <a href="../guides/inkling-guide.html">Learn the Inkling Language</a>  </li>
				<li class=""> <a href="../guides/machine-teaching.html">Programming Machine Teaching</a>  </li>
				<li class=""> <a href="../guides/ai-engine-guide.html">Understand AI Engine Components</a>  </li>
				<li class=""> <a href="../guides/web-graphs-guide.html">Understand BRAIN Graphs</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-3" class="toggle">References +</label><a  href="#">References</a>
			<input type="checkbox" id="drop-3"/>
			<ul id="references">
				<li class=""> <a href="../references/api-reference.html">API Reference</a>  </li>
				<li class=""> <a href="../references/cli-reference.html">CLI Reference</a>  </li>
				<li class=""> <a href="../references/inkling-reference.html">Inkling Reference</a>  </li>
				<li class=""> <a href="../references/simulator-reference.html">Simulator Reference</a>
				<li class=""> <a href="../references/library-reference.html">Python Library</a>  </li>
				<li class=""> <a href="../references/cpp-library-reference.html">C++ Library</a>  </li>
				
			</ul> 
		</li>

		<li class="header_menu_item "> <a href="../examples.html">Examples</a></li>

		<li>
			<input type="search" id="docs-search" placeholder="Search Bonsai Docs">
		</li>


	</ul>

</nav>


	<div id="main-wrapper">

    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">

        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div class="page-title">SDK1 Legacy Library Reference</div>
      <div id="toc">
      </div>

			 
<ul class="toc-footer">

<li><a href='https://bons.ai'>Bonsai Home</a></li>
<li><a href='https://beta.bons.ai'>BRAIN Dashboard</a></li>
<li><a href='https://github.com/BonsaiAI/slate'>Contribute to the Docs</a></li>
<li><a href='http://pages.bons.ai/apply.html'>Apply for Bonsai Platform Preview</a></li>
<li><a href="/releases.html">Product Release Notes</a></li>
<li><a href='https://bons.ai/contact-us#contact-page-form'>Contact Us</a></li>

</ul>


	   <div class="cc-bottom">
	
	<div class="toc-footer bottom cc-info">

		<a href='https://creativecommons.org/licenses/by-sa/4.0/' class="cc-icon-width" >
			<svg class="cc" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			viewBox="0 0 70.7 13.4" style="enable-background:new 0 0 70.7 13.4;" xml:space="preserve">

				<g>

				<g>
				<circle class="st0" cx="6.8" cy="6.7" r="6.1"/>
				<path d="M6.7,0c1.9,0,3.5,0.7,4.8,2c0.6,0.6,1.1,1.4,1.4,2.2c0.3,0.8,0.5,1.7,0.5,2.6c0,0.9-0.2,1.8-0.5,2.6
				c-0.3,0.8-0.8,1.5-1.4,2.1c-0.7,0.6-1.4,1.1-2.2,1.5c-0.8,0.3-1.7,0.5-2.6,0.5S5,13.3,4.2,12.9c-0.8-0.3-1.5-0.8-2.2-1.5
				s-1.1-1.4-1.5-2.2S0,7.6,0,6.7C0,5.8,0.2,5,0.5,4.2S1.3,2.6,2,2C3.3,0.7,4.8,0,6.7,0z M6.7,1.2c-1.5,0-2.8,0.5-3.9,1.6
				C2.3,3.4,1.9,4,1.6,4.6C1.4,5.3,1.2,6,1.2,6.7c0,0.7,0.1,1.4,0.4,2.1c0.3,0.7,0.7,1.3,1.2,1.8c0.5,0.5,1.1,0.9,1.8,1.2
				c0.7,0.3,1.4,0.4,2.1,0.4c0.7,0,1.4-0.1,2.1-0.4c0.7-0.3,1.3-0.7,1.8-1.2c1-1,1.6-2.3,1.6-3.9c0-0.7-0.1-1.4-0.4-2.1
				c-0.3-0.7-0.7-1.3-1.2-1.8C9.5,1.8,8.2,1.2,6.7,1.2z M6.6,5.6L5.7,6.1C5.6,5.9,5.5,5.7,5.4,5.6C5.3,5.6,5.1,5.5,5,5.5
				c-0.6,0-0.9,0.4-0.9,1.2c0,0.4,0.1,0.6,0.2,0.9C4.5,7.8,4.7,7.9,5,7.9c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4C6.5,8.1,6.2,8.3,5.9,8.5
				c-0.3,0.2-0.7,0.3-1,0.3c-0.6,0-1.1-0.2-1.5-0.6C3.1,7.9,2.9,7.4,2.9,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6
				C5.7,4.6,6.3,5,6.6,5.6z M10.5,5.6L9.6,6.1C9.5,5.9,9.4,5.7,9.3,5.6C9.1,5.6,9,5.5,8.9,5.5C8.3,5.5,8,5.9,8,6.7
				c0,0.4,0.1,0.6,0.2,0.9c0.2,0.2,0.4,0.3,0.7,0.3c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4c-0.2,0.3-0.4,0.6-0.7,0.8c-0.3,0.2-0.7,0.3-1,0.3
				c-0.6,0-1.1-0.2-1.5-0.6C7,7.9,6.8,7.4,6.8,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6C9.6,4.6,10.2,5,10.5,5.6z"/>
				</g>

				</g>
			</svg>
		</a>
		
		<a href='https://creativecommons.org/licenses/by-sa/4.0/'>Content:
		CC-BY-SA </a>
		
	</div>

</div>

    </div>

    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="python-library-overview">Python Library Overview</h1>

<p>The Python library wraps the API to simplify the process of building simulators
in the Python programming language.  Compatible with Python 2.7+</p>

<p>When the AI Engine trains with the simulator it works in a loop. First, the
simulator connects and registers itself with the AI Engine. Then, the simulator
sends the AI Engine a state and the value of any objectives or rewards; next,
the AI Engine replies with an action. The simulator then uses this action to
advance the simulation and compute a new state. This &ldquo;send state, receive
action&rdquo; process is repeated until training stops.  At any time the AI engine
may stop, reconfigure, and reset the simulator.  After doing so it will either
restart this training loop or stop training.  A training loop is sometimes
referred to as an &ldquo;iteration&rdquo;.</p>

<h1 id="simulator-class">Simulator Class</h1>
<pre class="highlight python tab-python"><code><span class="k">class</span> <span class="nc">FindCenterSimulator</span><span class="p">(</span><span class="n">bonsai</span><span class="o">.</span><span class="n">Simulator</span><span class="p">):</span>
    <span class="s">""" A simulator to teach an AI to find the mean of two values.
    """</span>
</code></pre>
<p>This class provides an interface for the event handling and responses required
to connect a simulator with the AI Engine.  Any methods added to classes that
inherit from <code class="prettyprint">bonsai.Simulator</code> that are not specified below are eligible
objectives (i.e. reward functions).</p>

<h2 id="start">start()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Start the episode by initializing value to a random number
            between the min and max.
        """</span>
        <span class="k">pass</span>
</code></pre>
<p>Called by the AI Engine to start the simulator at the start of a train or test
pass.  <code class="prettyprint">start</code> is called for the first time at the beginning of training and is
also the last of the stop, set_properties, reset, start message sequence sent
from the AI Engine in between training and test passes.</p>

<h2 id="stop">stop()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Stop is called after a training session is complete.
            This simple game requires no cleanup after training.
        """</span>
        <span class="k">pass</span>
</code></pre>
<p>Called by the AI Engine to stop training or testing. Training is also the first
callback of the stop, set_properties, reset, start message sequence sent by the
AI Engine between training and test passes.</p>

<h2 id="reset">reset()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Reset is called to reset simulator state before the next training 
            session.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span><span class="p">)</span>
</code></pre>
<p>Called by the AI Engine to reset simulator state in between training and test
passes.</p>

<h2 id="set_properties-kwargs">set_properties(**kwargs)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">set_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s">""" Reset is called to reset simulator state before the next training 
            session.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">'min'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">'max'</span><span class="p">]</span>
</code></pre>
<p>Called by the AI Engine. to configure the simulation before training is started
or restarted. <code class="prettyprint">set_properties</code> is called for the first time at the beginning of
training and is also called as part of the stop, set_properties, reset, start
message sequence sent from the AI Engine between training and test passes. See
the <a href="inkling-reference.html#configure-clause">configure clause of the lesson statement</a> in this simulator&rsquo;s
accompanying curriculums to get more information about the values in <code class="prettyprint">kwargs</code>.</p>

<h2 id="advance-actions">advance(actions)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">advance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="s">""" Function to make a move based on output from the BRAIN as
        defined in the Inkling file.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">:</span>
            <span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="n">actions</span><span class="p">[</span><span class="s">"delta"</span><span class="p">]</span>
</code></pre>
<p>Advance the simulation forward one tick. <code class="prettyprint">actions</code> contains a dictionary of key
values as defined by this simulator&rsquo;s action schema in Inkling.</p>

<h2 id="get_state">get_state()</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">get_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Gets the state of the simulator, whether it be a valid value or
            terminal ("game over") state.
        """</span>
        <span class="k">return</span> <span class="n">SimState</span><span class="p">(</span>
                 <span class="n">state</span><span class="o">=</span><span class="p">{</span><span class="s">"value"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">"min"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">,</span> <span class="s">"max"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span><span class="p">},</span>
                 <span class="n">is_terminal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">)</span>
</code></pre>
<p>Returns a <a href="#simstate">SimState</a> containing the state of the simulation computed after
the last call to <code class="prettyprint">advance</code>. <code class="prettyprint">SimState</code> contains a <code class="prettyprint">state</code> and an <code class="prettyprint">is_terminal</code>
flag. <code class="prettyprint">state</code> is a dictionary matching the state schema as defined in an
Inkling <code class="prettyprint">simulator</code> statement within an Inkling program. <code class="prettyprint">is_terminal</code> is only
true when the simulator is in a &ldquo;game over&rdquo; state. Any cleanup of the
<code class="prettyprint">is_terminal</code> state should be handled by <code class="prettyprint">advance</code> or <code class="prettyprint">get_state</code>. Each call
to <code class="prettyprint">get_state</code> gets the state of an &ldquo;iteration&rdquo; of training.  An &ldquo;episode&rdquo; is
a collection of iterations. Episodes are bounded by states where <code class="prettyprint">is_terminal</code>
is true.</p>

<h2 id="objectives-reward-functions">Objectives (Reward Functions)</h2>
<pre class="highlight python tab-python"><code>    <span class="k">def</span> <span class="nf">distance_to_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Distance between the current value, as adjusted by the BRAIN and
            the desired value (the mean between min and max)
        """</span>
        <span class="n">goal</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="nb">max</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="nb">min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">goal</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre>
<p>Any methods added to this class that are not named with one of the above
method names are eligible to be called as a reward function.  To be called,
the name of the function specified in an Inkling <code class="prettyprint">lesson</code> must match the name
of the method.  Reward functions specified in Inkling but not implemented on a
<code class="prettyprint">Simulator</code> class will result in an error.</p>

<h2 id="simstate">SimState</h2>

<p>A named tuple returned by <code class="prettyprint">Simulator.get_state</code>.</p>

<h3 id="state">state</h3>

<p>A dictionary matching the state schema as defined in an Inkling <code class="prettyprint">simulator</code>
statement within an Inkling program.</p>

<h3 id="is_terminal">is_terminal</h3>

<p><code class="prettyprint">True</code> when the simulator is in a &ldquo;game over&rdquo; state; otherwise <code class="prettyprint">False</code>.</p>

<h1 id="running-the-simulator">Running the Simulator</h1>

<h2 id="run_for_training_or_prediction-name-simulator_or_generator">run_for_training_or_prediction(name, simulator_or_generator)</h2>
<pre class="highlight python tab-python"><code><span class="n">simulator</span> <span class="o">=</span> <span class="n">FindCenterSimulator</span><span class="p">()</span>
<span class="n">bonsai</span><span class="o">.</span><span class="n">run_for_training_or_prediction</span><span class="p">(</span><span class="s">"inverted_pendulum_simulator"</span><span class="p">,</span>
                                      <span class="n">simulator</span><span class="p">)</span>
</code></pre>
<p>Connects to the AI Engine and identifies as <code class="prettyprint">name</code>. The <code class="prettyprint">name</code> of this
simulator must be the same in Inkling as it is in this function call.
<code class="prettyprint">simulator_or_generator</code> is a reference to an instance of the simulator. This
call blocks and drives the simulator loop until training stops.</p>

<h2 id="proxy">Proxy</h2>

<p>To connect a simulator from behind a corporate proxy, command line
tools like the bonsai sdk need to know where to send traffic.  For the
bonsai sdk, this is done in two steps - change the event_loop to
enable proxy support, and provide the proxy details.</p>

<h4 id="1-change-event_loop">1. Change <code class="prettyprint">event_loop</code></h4>
<pre class="highlight python tab-python"><code><span class="n">simulator</span> <span class="o">=</span> <span class="n">FindCenterSimulator</span><span class="p">()</span>
<span class="n">bonsai</span><span class="o">.</span><span class="n">run_for_training_or_prediction</span><span class="p">(</span><span class="s">"inverted_pendulum_simulator"</span><span class="p">,</span>
                                      <span class="n">simulator</span><span class="p">,</span>
                                      <span class="n">event_loop</span><span class="o">=</span><span class="s">"websocket"</span><span class="p">)</span>
</code></pre>
<p>Set <code class="prettyprint">event_loop=&quot;websocket&quot;</code> as an argument to <code class="prettyprint">run_for_training_or_prediction</code> in your simulator.</p>

<h4 id="2-set-environment-variables">2. Set Environment Variables</h4>

<blockquote>
<p>Windows</p>
</blockquote>
<pre class="highlight powershell tab-powershell"><code>| Variable       | Value                                      |
| -------------- | ------------------------------------------ |
| ALL_PROXY      | http://username:password@URL:3456   |
</code></pre>
<blockquote>
<p>macOS/Linux</p>
</blockquote>
<pre class="highlight sh tab-shell"><code><span class="gp">$ </span><span class="nb">export </span><span class="nv">ALL_PROXY</span><span class="o">=</span>http://username:password@URL:3456 
</code></pre>
<p>Next specify the proxy details as environment variables.  Proxy
details differ between companies, so ask your IT staff for the proxy
URL, port number, and if any login information such as username/password is also needed.</p>

<p>The examples shown use <code class="prettyprint">ALL_PROXY</code> but <code class="prettyprint">HTTPS_PROXY</code> and <code class="prettyprint">HTTP_PROXY</code> are also supported.</p>

<p><strong>Windows</strong></p>

<p>Go to System -&gt; Advanced system settings -&gt; Environment Variables to set these in Windows.</p>

<p><strong>macOS/Linux</strong></p>

<p>Use <code class="prettyprint">export</code> in macOS or Linux in a terminal window to set these variables into your PATH. You may wish to copy and
paste this into your <code class="prettyprint">.bash_profile</code> for future use.</p>

<h1 id="example">Example</h1>

<p>For a more complete example of the <code class="prettyprint">FindCenterSimulation</code>, see <a href="../examples.html#basic-simulator-find-the-center">examples</a>.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>

    </div>

  </div>
  <!-- at the end of the BODY -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
  apiKey: '49fa6f01d7ff94a85b9b7434b1c2b7cf',
  indexName: 'bon-sai',
  inputSelector: '#docs-search',
  debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>
  </body>
</html>
